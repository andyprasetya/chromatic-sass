(function(){var e,t,r,l,o,n,a,u,c,g,i,s;t=require("extend"),e=require("chroma-js"),c=require("node-sass"),s=require("node-sass-utils")(c),o=require("lodash"),r=o.isEqual,g=function(t){return e(t.getR(),t.getG(),t.getB()).hex()},i=function(e){return[e.getR(),e.getG(),e.getB(),e.getA()]},u=function(e){var t;return t=[Math.round(e[0]),Math.round(e[1]),Math.round(e[2])],e[3]&&t.push(e[3]),t},n=function(e){var t;return e=u(e),t=new c.types.Color,t.setR(e[0]),t.setG(e[1]),t.setB(e[2]),e[3]&&1!==e[3]&&t.setA(e[3]),t},a=function(e){return e=u(e),e[3]&&1!==e[3]?"rgba("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")":"rgb("+e[0]+", "+e[1]+", "+e[2]+")"},l=function(e){var t,r;return t=function(){var t,l,o;for(o=[],r=t=0,l=e.getLength();0<=l?t<l:t>l;r=0<=l?++t:--t)o.push(e.getValue(r));return o}()},module.exports={"chromatic-hsv($x, $y, $z, $alpha: 1)":function(t,r,l,o){return n(e.hsv(t.getValue(),r.getValue(),l.getValue(),o.getValue())._rgb)},"chromatic-lab($x, $y, $z, $alpha: 1)":function(t,r,l,o){return n(e.lab(t.getValue(),r.getValue(),l.getValue(),o.getValue())._rgb)},"chromatic-lch($x, $y, $z, $alpha: 1)":function(t,r,l,o){return n(e.lch(t.getValue(),r.getValue(),l.getValue(),o.getValue())._rgb)},"chromatic-hcl($h, $c, $l, $alpha: 1)":function(t,r,l,o){return n(e.lch(l.getValue(),r.getValue(),t.getValue(),o.getValue())._rgb)},"chromatic-cmyk($c, $m, $y, $k, $alpha: 1)":function(t,r,l,o,a){return n(e.cmyk(t.getValue(),r.getValue(),l.getValue(),o.getValue(),a.getValue())._rgb)},"chromatic-gl($r, $g, $b, $alpha: 1)":function(t,r,l,o){return n(e.gl(t.getValue(),r.getValue(),l.getValue(),o.getValue())._rgb)},"chromatic-temperature($temperature)":function(t){return n(e.temperature(t.getValue())._rgb)},"chromatic-mix($color0, $color1, $position: .5, $mode: 'lab')":function(t,r,l,o){return n(e.mix(i(t),i(r),l.getValue(),o.getValue())._rgb)},"chromatic-blend($color0, $color1, $blendMode)":function(t,r,l){return n(e.blend(i(t),i(r),l.getValue())._rgb)},"chromatic-contrast($color0, $color1)":function(t,r){return c.types.Number(e.contrast(g(t),g(r)))},"chromatic-color-set($color, $channel, $value)":function(t,r,l){var o;return r=r.getValue(),l=l.getValue(),o=i(t),n(e(o).set(r,l)._rgb)},"chromatic-color-get($color, $channel)":function(t,r){var l;return r=r.getValue(),l=i(t),c.types.Number(e(l).get(r))},"chromatic-color-darken($color, $value: '')":function(t,r){var l;return r=r.getValue(),l=i(t),n(e(l).darken(null!=r?r:void 0)._rgb)},"chromatic-color-brighten($color, $value: '')":function(t,r){var l;return r=r.getValue(),l=i(t),n(e(l).brighten(null!=r?r:void 0)._rgb)},"chromatic-color-saturate($color, $value: '')":function(t,r){var l;return r=r.getValue(),l=i(t),n(e(l).saturate(null!=r?r:void 0)._rgb)},"chromatic-color-desaturate($color, $value: '')":function(t,r){var l;return r=r.getValue(),l=i(t),n(e(l).desaturate(null!=r?r:void 0)._rgb)},"chromatic-color-temperature($color)":function(t){var r;return r=i(t),c.types.Number(e(r).temperature())},"chromatic-color-luminance($color, $luminance: '', $mode: '')":function(t,r,l){var o;return o=i(t),r=r.getValue(),l=l.getValue(),r?n(l?e(o).luminance(r,l)._rgb:e(o).luminance(r)._rgb):c.types.Number(e(o).luminance())},"chromatic-random()":function(){return n(e.random()._rgb)},"chromatic-gradient($argslist...)":function(o){var n,u,g,h,p,f,m,V,$,b,d,y,v,_,O,x,k,L,q,z,M,N,K,B,C,E,G,J,R,T,j,A,U,w,P,S,D,F,H,I,Q,W,X,Y,Z,ee,te,re;if(f={mode:"lab",stops:7,type:"linear"},m=null,P={},p=[],x=[],D=[],g=o.getLength(),b=o.getValue(0),y=s.typeOf(b),"list"===y?(d=s.castToJs(b),d.every(function(e){return"string"===s.typeOf(e)})&&(m=d.join(" "))):"number"===y?m=b.getValue()+b.getUnit():"string"===y&&(m=b.getValue()),L=o.getValue(g-1),q=s.typeOf(L),"map"===q)for(v=k=0,H=L.getLength();0<=H?k<H:k>H;v=0<=H?++k:--k)P[L.getKey(v).getValue()]=L.getValue(v).getValue();for(Z=t(f,P),ee=m?1:0,$="map"===q?g-1:g,v=G=I=ee,Q=$;I<=Q?G<Q:G>Q;v=I<=Q?++G:--G)if(n=o.getValue(v),u=s.typeOf(n),"list"===u){if(n=l(n),"color"!==s.typeOf(n[0])||"number"!==s.typeOf(n[1])||2!==n.length)return c.types.Error("Chromatic gradient color stops must take the form: <color> [<percentage>]?");if("%"!==n[1].getUnit())return c.types.Error("Chromatic gradient color-stop initPositions must be provided as percentages");p.push(i(n[0])),D.push(n[1].getValue()/100)}else"color"===u&&(p.push(i(n)),D.push(null));for(null===D[0]&&(D[0]=0),null===D[D.length-1]&&(D[D.length-1]=1),z=0,U=0,A=0,E=0,O=w=0,M=D.length;w<M;O=++w)if(re=D[O],null===re){for(_=0,A+=1,W=D.slice(O+1,D.length),T=S=0,N=W.length;S<N;T=++S)if(j=W[T]){U=T+O-z,_=j<=E?E:1*(j-D[z])/(U+1);break}D[O]=_*A,x[O]=_*A}else A=0,z=O,re<E?(re=E,D[O]=re):re>E&&(E=re);for(;p.length<Z.stops;){for(B=0,C=null,v=F=0,X=p.length-1;0<=X?F<X:F>X;v=0<=X?++F:--F)V=D[v+1]-D[v],V>B&&!r(p[v],p[v+1])&&(C=v,B=V);if(null==C)break;R=B/2+D[C],J=e.mix(p[C],p[C+1],.5,Z.mode)._rgb,p.splice(C+1,0,J),D.splice(C+1,0,R)}for(te=Z.type+"-gradient(",m&&(te+=m+", "),v=Y=0,K=p.length;Y<K;v=++Y)h=p[v],te+=a(h),te+=" "+100*D[v]+"%",v<p.length-1&&(te+=", ");return te+=")",c.types.String(te)},"chromatic-scale($argslist...)":function(r){var l,o,a,u,i,h,p,f,m,V,$,b,d,y,v,_,O,x,k;for(i={mode:"lab",stops:10,location:null,positions:null,padding:null},b={},u=[],h=p=0,y=r.getLength();0<=y?p<y:p>y;h=0<=y?++p:--p)if(l=r.getValue(h),o=s.typeOf(l),"map"===o)for(h=V=0,v=l.getLength();0<=v?V<v:V>v;h=0<=v?++V:--V)b[l.getKey(h).getValue()]=l.getValue(h).getValue();else if("list"===o)for(_=s.castToJs(l),$=0,f=_.length;$<f;$++)a=_[$],"color"===s.typeOf(a)&&u.push(g(a));else"color"===o&&u.push(g(l));if(k=t(i,b),x=e.scale(u).mode(k.mode),k.positions&&(x=x.positions(k.positions)),k.padding&&(x=x.padding(k.padding)),k.location)return n(x(k.location).rgb());for(u=x.colors(k.stops),O=c.types.Map(u.length),h=d=0,m=u.length;d<m;h=++d)a=u[h],O.setKey(h,c.types.Number(h)),O.setValue(h,n(e(a).rgb()));return O},"chromatic-bezier($argslist...)":function(r){var l,o,n,a,u,c,i,h,p,f,m,V,$,b,d,y;for(u={stops:10,location:null},m={},a=[],c=i=0,V=r.getLength();0<=V?i<V:i>V;c=0<=V?++i:--i)if(l=r.getValue(c),o=s.typeOf(l),"map"===o)for(c=p=0,$=l.getLength();0<=$?p<$:p>$;c=0<=$?++p:--p)m[l.getKey(c).getValue()]=l.getValue(c).getValue();else if("list"===o)for(b=s.castToJs(l),f=0,h=b.length;f<h;f++)n=b[f],"color"===s.typeOf(n)&&a.push(g(n));else"color"===o&&a.push(g(l));return y=t(u,m),d=e.bezier(a).scale()}}}).call(this);
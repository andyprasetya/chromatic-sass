(function(){var e,t,r,o,n,i,c,u,s,g,h,p,f;t=require("extend"),e=require("chroma-js"),u=require("node-sass"),p=require("node-sass-utils")(u),f=require("sassport"),r=require("lodash.isEqual"),n=function(e){return u.types.Color(e[0],e[1],e[2])},g=function(t){return e(t.getR(),t.getG(),t.getB()).rgb()},s=function(t){return e(t.getR(),t.getG(),t.getB()).hex()},h=function(e){return[e.getR(),e.getG(),e.getB(),e.getA()]},c=function(e){return"rgba("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},i=function(e){return u.types.Color(rgb[0],rgb[1],rgb[2],rgb[3])},o=function(e){var t,r;return t=function(){var t,o,n;for(n=[],r=t=0,o=e.getLength();o>=0?o>t:t>o;r=o>=0?++t:--t)n.push(e.getValue(r));return n}()},module.exports={"chromatic($argslist...)":f.wrap(function(t){return e.lab(l,a,b).hex()}),"chromatic-hsv($x, $y, $z)":f.wrap(function(t,r,o){return e.hsv(t,r,o).hex()}),"chromatic-lab($x, $y, $z)":f.wrap(function(t,r,o){return e.lab(t,r,o).hex()}),"chromatic-lch($x, $y, $z)":f.wrap(function(t,r,o){return e.lch(t,r,o).hex()}),"chromatic-hcl($x, $y, $z)":f.wrap(function(t,r,o){return e.hcl(t,r,o).hex()}),"chromatic-cmyk($c, $m, $y, $k)":f.wrap(function(t,r,o,n){return e.cmyk(t,r,o,n).hex()}),"chromatic-gl($r, $g, $b, $a: 1)":f.wrap(function(t,r,o,n){return e.gl(t,r,o,n).hex()}),"chromatic-color-temperature($color)":f.wrap(function(t){return e(s(t)).temperature()}),"chromatic-color-darken($color, $value: '')":f.wrap(function(t,r){return e(s(t)).darken(null!=r?r:void 0).hex()}),"chromatic-color-lighten($color, $value: '')":f.wrap(function(t,r){return e(s(t)).lighten(null!=r?r:void 0).hex()}),"chromatic-color-saturate($color, $value: '')":f.wrap(function(t,r){return e(s(t)).saturate(null!=r?r:void 0).hex()}),"chromatic-color-desaturate($color, $value: '')":f.wrap(function(t,r){return e(s(t)).desaturate(null!=r?r:void 0).hex()}),"chromatic-color-set($color, $channel, $value)":f.wrap(function(t,r,o){return e(s(t)).set(r,o).hex()}),"chromatic-color-get($color, $channel)":f.wrap(function(t,r){return e(s(t)).get(r)}),"chromatic-color-luminance($color, $luminance: '', $mode: '')":f.wrap(function(t,r,o){return r?o?e(s(t)).luminance(r,o).hex():e(s(t)).luminance(r).hex():e(s(t)).luminance()}),"chromatic-mix($color0, $color1, $position: .5, $mode: 'lab')":f.wrap(function(t,r,o,n){return e.mix(s(t),s(r),o,n).hex()}),"chromatic-blend($color0, $color1, $blendMode)":f.wrap(function(t,r,o){return e.blend(s(t),s(r),o).hex()}),"chromatic-random()":f.wrap(function(){return e.random().hex()}),"chromatic-contrast($color0, $color1)":f.wrap(function(t,r){return e.contrast(s(t),s(r))}),"chromatic-gradient($argslist...)":function(n){var l,i,a,s,g,f,m,$,d,y,b,x,v,w,V,O,k,z,q,L,C,E,K,B,G,J,R,T,j,M,P,U,A,N,S,_,D,F,H,I,Q,W,X,Y,Z,ee,te,re;if(f={mode:"lab",stops:7,type:"linear"},m=null,S={},g=[],O=[],D=[],a=n.getLength(),y=n.getValue(0),x=p.typeOf(y),"list"===x?(b=p.castToJs(y),b.every(function(e){return"string"===p.typeOf(e)})&&(m=b.join(" "))):"number"===x?m=y.getValue()+y.getUnit():"string"===x&&(m=y.getValue()),z=n.getValue(a-1),q=p.typeOf(z),"map"===q)for(v=k=0,H=z.getLength();H>=0?H>k:k>H;v=H>=0?++k:--k)S[z.getKey(v).getValue()]=z.getValue(v).getValue();for(Z=t(f,S),ee=m?1:0,d="map"===q?a-1:a,v=R=I=ee,Q=d;Q>=I?Q>R:R>Q;v=Q>=I?++R:--R)if(l=n.getValue(v),i=p.typeOf(l),"list"===i){if(Z.bezier)return u.types.Error("Chromatic gradient with bezier interpolation must not have stop initPositions");if(l=o(l),"color"!==p.typeOf(l[0])||"number"!==p.typeOf(l[1])||2!==l.length)return u.types.Error("Chromatic gradient color stops must take the form: <color> [<percentage>]?");if("%"!==l[1].getUnit())return u.types.Error("Chromatic gradient color-stop initPositions must be provided as percentages");g.push(h(l[0])),O.push(l[1].getValue()/100)}else"color"===i&&(g.push(h(l)),O.push(null));for(D=O.slice(0),null===D[0]&&(D[0]=0),null===D[D.length-1]&&(D[D.length-1]=1),L=0,A=0,U=0,J=0,V=N=0,C=D.length;C>N;V=++N)if(re=D[V],null===re){for(w=0,U+=1,W=D.slice(V+1,D.length),M=_=0,E=W.length;E>_;M=++_)if(P=W[M]){A=M+V-L,w=J>=P?J:1*(P-D[L])/(A+1);break}D[V]=w*U}else U=0,L=V,J>re?(re=J,D[V]=re):re>J&&(J=re);for(;g.length<Z.stops;){for(B=0,G=null,v=F=0,X=g.length-1;X>=0?X>F:F>X;v=X>=0?++F:--F)$=D[v+1]-D[v],$>B&&!r(g[v],g[v+1])&&(G=v,B=$);if(null==G)break;j=B/2+D[G],T=e.mix(g[G],g[G+1],.5,Z.mode)._rgb,g.splice(G+1,0,T),D.splice(G+1,0,j),O.splice(G+1,0,null)}for(te=Z.type+"-gradient(",m&&(te+=m+", "),v=Y=0,K=g.length;K>Y;v=++Y)s=g[v],te+=c(s),O[v]&&(te+=" "+100*O[v]+"%"),v<g.length-1&&(te+=", ");return te+=")",u.types.String(te)},"chromatic-scale($argslist...)":function(r){var o,l,i,a,c,g,h,f,m,$,d,y,b,x,v,w,V,O,k;for(c={mode:"lab",stops:10,location:null,positions:null,padding:null},y={},a=[],g=h=0,x=r.getLength();x>=0?x>h:h>x;g=x>=0?++h:--h)if(o=r.getValue(g),l=p.typeOf(o),"map"===l)for(g=$=0,v=o.getLength();v>=0?v>$:$>v;g=v>=0?++$:--$)y[o.getKey(g).getValue()]=o.getValue(g).getValue();else if("list"===l)for(w=p.castToJs(o),d=0,f=w.length;f>d;d++)i=w[d],"color"===p.typeOf(i)&&a.push(s(i));else"color"===l&&a.push(s(o));if(k=t(c,y),O=e.scale(a).mode(k.mode),k.positions&&(O=O.positions(k.positions)),k.padding&&(O=O.padding(k.padding)),k.location)return n(O(k.location).rgb());for(a=O.colors(k.stops),V=u.types.Map(a.length),g=b=0,m=a.length;m>b;g=++b)i=a[g],V.setKey(g,u.types.Number(g)),V.setValue(g,n(e(i).rgb()));return V},"chromatic-bezier($argslist...)":function(r){var o,n,l,i,a,c,u,g,h,f,m,$,d,y,b,x;for(a={stops:10,location:null},m={},i=[],c=u=0,$=r.getLength();$>=0?$>u:u>$;c=$>=0?++u:--u)if(o=r.getValue(c),n=p.typeOf(o),"map"===n)for(c=h=0,d=o.getLength();d>=0?d>h:h>d;c=d>=0?++h:--h)m[o.getKey(c).getValue()]=o.getValue(c).getValue();else if("list"===n)for(y=p.castToJs(o),f=0,g=y.length;g>f;f++)l=y[f],"color"===p.typeOf(l)&&i.push(s(l));else"color"===n&&i.push(s(o));return x=t(a,m),b=e.bezier(i).scale()}}}).call(this);
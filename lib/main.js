(function(){var e,t,r,o,n,c,u,i,s,g,h,p,f,m;t=require("extend"),e=require("chroma-js"),s=require("node-sass"),f=require("node-sass-utils")(s),m=require("sassport"),r=require("lodash.isEqual"),n=function(e){return s.types.Color(e[0],e[1],e[2])},h=function(t){return e(t.getR(),t.getG(),t.getB()).rgb()},g=function(t){return e(t.getR(),t.getG(),t.getB()).hex()},p=function(e){return[e.getR(),e.getG(),e.getB(),e.getA()]},i=function(e){return[Math.round(e[0]),Math.round(e[1]),Math.round(e[2]),e[3]]},u=function(e){return e=i(e),"rgba("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},c=function(e){return s.types.Color(i(e))},o=function(e){var t,r;return t=function(){var t,o,n;for(n=[],r=t=0,o=e.getLength();o>=0?o>t:t>o;r=o>=0?++t:--t)n.push(e.getValue(r));return n}()},module.exports={"chromatic($argslist...)":m.wrap(function(t){return e.lab(l,a,b).hex()}),"chromatic-hsv($x, $y, $z)":m.wrap(function(t,r,o){return e.hsv(t,r,o).hex()}),"chromatic-lab($x, $y, $z)":m.wrap(function(t,r,o){return e.lab(t,r,o).hex()}),"chromatic-lch($x, $y, $z)":m.wrap(function(t,r,o){return e.lch(t,r,o).hex()}),"chromatic-hcl($x, $y, $z)":m.wrap(function(t,r,o){return e.hcl(t,r,o).hex()}),"chromatic-cmyk($c, $m, $y, $k)":m.wrap(function(t,r,o,n){return e.cmyk(t,r,o,n).hex()}),"chromatic-gl($r, $g, $b, $a: 1)":m.wrap(function(t,r,o,n){return e.gl(t,r,o,n).hex()}),"chromatic-color-temperature($color)":m.wrap(function(t){return e(g(t)).temperature()}),"chromatic-color-darken($color, $value: '')":m.wrap(function(t,r){return e(g(t)).darken(null!=r?r:void 0).hex()}),"chromatic-color-lighten($color, $value: '')":m.wrap(function(t,r){return e(g(t)).lighten(null!=r?r:void 0).hex()}),"chromatic-color-saturate($color, $value: '')":m.wrap(function(t,r){return e(g(t)).saturate(null!=r?r:void 0).hex()}),"chromatic-color-desaturate($color, $value: '')":m.wrap(function(t,r){return e(g(t)).desaturate(null!=r?r:void 0).hex()}),"chromatic-color-set($color, $channel, $value)":m.wrap(function(t,r,o){return e(g(t)).set(r,o).hex()}),"chromatic-color-get($color, $channel)":m.wrap(function(t,r){return e(g(t)).get(r)}),"chromatic-color-luminance($color, $luminance: '', $mode: '')":m.wrap(function(t,r,o){return r?o?e(g(t)).luminance(r,o).hex():e(g(t)).luminance(r).hex():e(g(t)).luminance()}),"chromatic-mix($color0, $color1, $position: .5, $mode: 'lab')":m.wrap(function(t,r,o,n){return e.mix(g(t),g(r),o,n).hex()}),"chromatic-blend($color0, $color1, $blendMode)":m.wrap(function(t,r,o){return e.blend(g(t),g(r),o).hex()}),"chromatic-random()":m.wrap(function(){return e.random().hex()}),"chromatic-contrast($color0, $color1)":m.wrap(function(t,r){return e.contrast(g(t),g(r))}),"chromatic-gradient($argslist...)":function(n){var l,a,c,i,g,h,m,$,d,y,x,b,v,w,V,O,k,q,L,z,M,C,K,B,E,G,J,R,T,j,U,A,N,P,S,_,D,F,H,I,Q,W,X,Y,Z,ee,te,re;if(h={mode:"lab",stops:7,type:"linear"},m=null,S={},g=[],O=[],D=[],c=n.getLength(),y=n.getValue(0),b=f.typeOf(y),"list"===b?(x=f.castToJs(y),x.every(function(e){return"string"===f.typeOf(e)})&&(m=x.join(" "))):"number"===b?m=y.getValue()+y.getUnit():"string"===b&&(m=y.getValue()),q=n.getValue(c-1),L=f.typeOf(q),"map"===L)for(v=k=0,H=q.getLength();H>=0?H>k:k>H;v=H>=0?++k:--k)S[q.getKey(v).getValue()]=q.getValue(v).getValue();for(Z=t(h,S),ee=m?1:0,d="map"===L?c-1:c,v=J=I=ee,Q=d;Q>=I?Q>J:J>Q;v=Q>=I?++J:--J)if(l=n.getValue(v),a=f.typeOf(l),"list"===a){if(l=o(l),"color"!==f.typeOf(l[0])||"number"!==f.typeOf(l[1])||2!==l.length)return s.types.Error("Chromatic gradient color stops must take the form: <color> [<percentage>]?");if("%"!==l[1].getUnit())return s.types.Error("Chromatic gradient color-stop initPositions must be provided as percentages");g.push(p(l[0])),D.push(l[1].getValue()/100)}else"color"===a&&(g.push(p(l)),D.push(null));for(null===D[0]&&(D[0]=0),null===D[D.length-1]&&(D[D.length-1]=1),z=0,N=0,A=0,G=0,V=P=0,M=D.length;M>P;V=++P)if(re=D[V],null===re){for(w=0,A+=1,W=D.slice(V+1,D.length),j=_=0,C=W.length;C>_;j=++_)if(U=W[j]){N=j+V-z,w=G>=U?G:1*(U-D[z])/(N+1);break}D[V]=w*A,O[V]=w*A}else A=0,z=V,G>re?(re=G,D[V]=re):re>G&&(G=re);for(;g.length<Z.stops;){for(B=0,E=null,v=F=0,X=g.length-1;X>=0?X>F:F>X;v=X>=0?++F:--F)$=D[v+1]-D[v],$>B&&!r(g[v],g[v+1])&&(E=v,B=$);if(null==E)break;T=B/2+D[E],R=e.mix(g[E],g[E+1],.5,Z.mode)._rgb,g.splice(E+1,0,R),D.splice(E+1,0,T)}for(te=Z.type+"-gradient(",m&&(te+=m+", "),v=Y=0,K=g.length;K>Y;v=++Y)i=g[v],te+=u(i),te+=" "+100*D[v]+"%",v<g.length-1&&(te+=", ");return te+=")",s.types.String(te)},"chromatic-scale($argslist...)":function(r){var o,l,a,c,u,i,h,p,m,$,d,y,x,b,v,w,V,O,k;for(u={mode:"lab",stops:10,location:null,positions:null,padding:null},y={},c=[],i=h=0,b=r.getLength();b>=0?b>h:h>b;i=b>=0?++h:--h)if(o=r.getValue(i),l=f.typeOf(o),"map"===l)for(i=$=0,v=o.getLength();v>=0?v>$:$>v;i=v>=0?++$:--$)y[o.getKey(i).getValue()]=o.getValue(i).getValue();else if("list"===l)for(w=f.castToJs(o),d=0,p=w.length;p>d;d++)a=w[d],"color"===f.typeOf(a)&&c.push(g(a));else"color"===l&&c.push(g(o));if(k=t(u,y),O=e.scale(c).mode(k.mode),k.positions&&(O=O.positions(k.positions)),k.padding&&(O=O.padding(k.padding)),k.location)return n(O(k.location).rgb());for(c=O.colors(k.stops),V=s.types.Map(c.length),i=x=0,m=c.length;m>x;i=++x)a=c[i],V.setKey(i,s.types.Number(i)),V.setValue(i,n(e(a).rgb()));return V},"chromatic-bezier($argslist...)":function(r){var o,n,l,a,c,u,i,s,h,p,m,$,d,y,x,b;for(c={stops:10,location:null},m={},a=[],u=i=0,$=r.getLength();$>=0?$>i:i>$;u=$>=0?++i:--i)if(o=r.getValue(u),n=f.typeOf(o),"map"===n)for(u=h=0,d=o.getLength();d>=0?d>h:h>d;u=d>=0?++h:--h)m[o.getKey(u).getValue()]=o.getValue(u).getValue();else if("list"===n)for(y=f.castToJs(o),p=0,s=y.length;s>p;p++)l=y[p],"color"===f.typeOf(l)&&a.push(g(l));else"color"===n&&a.push(g(o));return b=t(c,m),x=e.bezier(a).scale()}}}).call(this);
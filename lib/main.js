(function(){var e,r,t,o,n,c,i,u,s,h,g,p,f;r=require("extend"),e=require("chroma-js"),u=require("node-sass"),p=require("node-sass-utils")(u),f=require("sassport"),t=require("lodash.isEqual"),n=function(e){return u.types.Color(e[0],e[1],e[2])},h=function(r){return e(r.getR(),r.getG(),r.getB()).rgb()},s=function(r){return e(r.getR(),r.getG(),r.getB()).hex()},g=function(e){return[e.getR(),e.getG(),e.getB(),e.getA()]},i=function(e){return"rgba("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},c=function(e){return u.types.Color(rgb[0],rgb[1],rgb[2],rgb[3])},o=function(e){var r,t;return r=function(){var r,o,n;for(n=[],t=r=0,o=e.getLength();o>=0?o>r:r>o;t=o>=0?++r:--r)n.push(e.getValue(t));return n}()},module.exports={"chromatic($argslist...)":f.wrap(function(r){return e.lab(l,a,b).hex()}),"chromatic-hsv($x, $y, $z)":f.wrap(function(r,t,o){return e.hsv(r,t,o).hex()}),"chromatic-lab($x, $y, $z)":f.wrap(function(r,t,o){return e.lab(r,t,o).hex()}),"chromatic-lch($x, $y, $z)":f.wrap(function(r,t,o){return e.lch(r,t,o).hex()}),"chromatic-hcl($x, $y, $z)":f.wrap(function(r,t,o){return e.hcl(r,t,o).hex()}),"chromatic-cmyk($c, $m, $y, $k)":f.wrap(function(r,t,o,n){return e.cmyk(r,t,o,n).hex()}),"chromatic-gl($r, $g, $b, $a: 1)":f.wrap(function(r,t,o,n){return e.gl(r,t,o,n).hex()}),"chromatic-color-temperature($color)":f.wrap(function(r){return e(s(r)).temperature()}),"chromatic-color-darken($color, $value: '')":f.wrap(function(r,t){return e(s(r)).darken(null!=t?t:void 0).hex()}),"chromatic-color-lighten($color, $value: '')":f.wrap(function(r,t){return e(s(r)).lighten(null!=t?t:void 0).hex()}),"chromatic-color-saturate($color, $value: '')":f.wrap(function(r,t){return e(s(r)).saturate(null!=t?t:void 0).hex()}),"chromatic-color-desaturate($color, $value: '')":f.wrap(function(r,t){return e(s(r)).desaturate(null!=t?t:void 0).hex()}),"chromatic-color-set($color, $channel, $value)":f.wrap(function(r,t,o){return e(s(r)).set(t,o).hex()}),"chromatic-color-get($color, $channel)":f.wrap(function(r,t){return e(s(r)).get(t)}),"chromatic-color-luminance($color, $luminance: '', $mode: '')":f.wrap(function(r,t,o){return t?o?e(s(r)).luminance(t,o).hex():e(s(r)).luminance(t).hex():e(s(r)).luminance()}),"chromatic-mix($color0, $color1, $position: .5, $mode: 'lab')":f.wrap(function(r,t,o,n){return e.mix(s(r),s(t),o,n).hex()}),"chromatic-blend($color0, $color1, $blendMode)":f.wrap(function(r,t,o){return e.blend(s(r),s(t),o).hex()}),"chromatic-random()":f.wrap(function(){return e.random().hex()}),"chromatic-contrast($color0, $color1)":f.wrap(function(r,t){return e.contrast(s(r),s(t))}),"chromatic-gradient($argslist...)":function(n){var l,c,a,s,h,f,m,$,d,b,y,x,w,v,V,z,k,O,q,C,L,E,P,B,G,K,R,j,J,M,T,U,A,N,S,_,D,F,H,I,Q,W,X,Y,Z,ee,re,te;if(m={mode:"lab",bezier:!1,stops:7,type:"linear",padding:null},$=null,S={},f=[],D=[],s=[],a=n.getLength(),y=n.getValue(0),w=p.typeOf(y),"list"===w?(x=p.castToJs(y),x.every(function(e){return"string"===p.typeOf(e)})&&($=x.join(" "))):"number"===w?$=y.getValue()+y.getUnit():"string"===w&&($=y.getValue()),O=n.getValue(a-1),q=p.typeOf(O),"map"===q)for(v=k=0,H=O.getLength();H>=0?H>k:k>H;v=H>=0?++k:--k)S[O.getKey(v).getValue()]=O.getValue(v).getValue();for(Z=r(m,S),ee=$?1:0,b="map"===q?a-1:a,v=R=I=ee,Q=b;Q>=I?Q>R:R>Q;v=Q>=I?++R:--R)if(l=n.getValue(v),c=p.typeOf(l),"list"===c){if(Z.bezier)return u.types.Error("Chromatic gradient with bezier interpolation must not have stop positions");if(l=o(l),"color"!==p.typeOf(l[0])||"number"!==p.typeOf(l[1])||2!==l.length)return u.types.Error("Chromatic gradient color stops must take the form: <color> [<percentage>]?");if("%"!==l[1].getUnit())return u.types.Error("Chromatic gradient color-stop positions must be provided as percentages");f.push(g(l[0])),D.push(l[1].getValue()/100)}else"color"===c&&(f.push(g(l)),D.push(null));for(s=D.slice(0),null===s[0]&&(s[0]=0),null===s[s.length-1]&&(s[s.length-1]=1),C=0,A=0,U=0,K=0,z=N=0,L=s.length;L>N;z=++N)if(te=s[z],null===te){for(V=0,U+=1,W=s.slice(z+1,s.length),M=_=0,E=W.length;E>_;M=++_)if(T=W[M]){A=M+z-C,V=K>=T?K:1*(T-s[C])/(A+1);break}s[z]=V*U}else U=0,C=z,K>te?(te=K,s[z]=te):te>K&&(K=te);for(;f.length<Z.stops;){for(B=0,G=null,v=F=0,X=f.length-1;X>=0?X>F:F>X;v=X>=0?++F:--F)d=s[v+1]-s[v],d>B&&!t(f[v],f[v+1])&&(G=v,B=d);if(null==G)break;J=B/2+s[G],j=e.mix(f[G],f[G+1],.5,Z.mode)._rgb,f.splice(G+1,0,j),s.splice(G+1,0,J),D.splice(G+1,0,null)}for(re=Z.type+"-gradient(",$&&(re+=$+", "),v=Y=0,P=f.length;P>Y;v=++Y)h=f[v],re+=i(h),D[v]&&(re+=" "+100*D[v]+"%"),v<f.length-1&&(re+=", ");return re+=")",u.types.String(re)},"chromatic-scale($argslist...)":function(t){var o,l,c,a,i,h,g,f,m,$,d,b,y,x,w,v,V,z,k;for(i={mode:"lab",stops:10,bezier:!1,location:null,calculatedPositions:null,padding:null},b={},a=[],h=g=0,x=t.getLength();x>=0?x>g:g>x;h=x>=0?++g:--g)if(o=t.getValue(h),l=p.typeOf(o),"map"===l)for(h=$=0,w=o.getLength();w>=0?w>$:$>w;h=w>=0?++$:--$)b[o.getKey(h).getValue()]=o.getValue(h).getValue();else if("list"===l)for(v=p.castToJs(o),d=0,f=v.length;f>d;d++)c=v[d],"color"===p.typeOf(c)&&a.push(s(c));else"color"===l&&a.push(s(o));if(k=r(i,b),k.bezier?z=e.bezier(a).scale():(z=e.scale(a).mode(k.mode),k.calculatedPositions&&(z=z.calculatedPositions(k.calculatedPositions))),k.location)return n(z(k.location).rgb());for(a=z.colors(k.stops),V=u.types.Map(a.length),h=y=0,m=a.length;m>y;h=++y)c=a[h],V.setKey(h,u.types.Number(h)),V.setValue(h,n(e(c).rgb()));return V}}}).call(this);
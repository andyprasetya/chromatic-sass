(function(){var e,r,t,o,n,i,c,u,s,h,g,p,f;r=require("extend"),e=require("chroma-js"),u=require("node-sass"),p=require("node-sass-utils")(u),f=require("sassport"),t=require("lodash.isEqual"),n=function(e){return u.types.Color(e[0],e[1],e[2])},h=function(r){return e(r.getR(),r.getG(),r.getB()).rgb()},s=function(r){return e(r.getR(),r.getG(),r.getB()).hex()},g=function(e){return[e.getR(),e.getG(),e.getB(),e.getA()]},c=function(e){return"rgba("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},i=function(e){return u.types.Color(rgb[0],rgb[1],rgb[2],rgb[3])},o=function(e){var r,t;return r=function(){var r,o,n;for(n=[],t=r=0,o=e.getLength();o>=0?o>r:r>o;t=o>=0?++r:--r)n.push(e.getValue(t));return n}()},module.exports={"chromatic($argslist...)":f.wrap(function(r){return e.lab(l,a,b).hex()}),"chromatic-hsv($x, $y, $z)":f.wrap(function(r,t,o){return e.hsv(r,t,o).hex()}),"chromatic-lab($x, $y, $z)":f.wrap(function(r,t,o){return e.lab(r,t,o).hex()}),"chromatic-lch($x, $y, $z)":f.wrap(function(r,t,o){return e.lch(r,t,o).hex()}),"chromatic-hcl($x, $y, $z)":f.wrap(function(r,t,o){return e.hcl(r,t,o).hex()}),"chromatic-cmyk($c, $m, $y, $k)":f.wrap(function(r,t,o,n){return e.cmyk(r,t,o,n).hex()}),"chromatic-gl($r, $g, $b, $a: 1)":f.wrap(function(r,t,o,n){return e.gl(r,t,o,n).hex()}),"chromatic-color-temperature($color)":f.wrap(function(r){return e(s(r)).temperature()}),"chromatic-color-darken($color, $value: '')":f.wrap(function(r,t){return e(s(r)).darken(null!=t?t:void 0).hex()}),"chromatic-color-lighten($color, $value: '')":f.wrap(function(r,t){return e(s(r)).lighten(null!=t?t:void 0).hex()}),"chromatic-color-saturate($color, $value: '')":f.wrap(function(r,t){return e(s(r)).saturate(null!=t?t:void 0).hex()}),"chromatic-color-desaturate($color, $value: '')":f.wrap(function(r,t){return e(s(r)).desaturate(null!=t?t:void 0).hex()}),"chromatic-color-set($color, $channel, $value)":f.wrap(function(r,t,o){return e(s(r)).set(t,o).hex()}),"chromatic-color-get($color, $channel)":f.wrap(function(r,t){return e(s(r)).get(t)}),"chromatic-color-luminance($color, $luminance: '', $mode: '')":f.wrap(function(r,t,o){return t?o?e(s(r)).luminance(t,o).hex():e(s(r)).luminance(t).hex():e(s(r)).luminance()}),"chromatic-mix($color0, $color1, $position: .5, $mode: 'lab')":f.wrap(function(r,t,o,n){return e.mix(s(r),s(t),o,n).hex()}),"chromatic-blend($color0, $color1, $blendMode)":f.wrap(function(r,t,o){return e.blend(s(r),s(t),o).hex()}),"chromatic-random()":f.wrap(function(){return e.random().hex()}),"chromatic-contrast($color0, $color1)":f.wrap(function(r,t){return e.contrast(s(r),s(t))}),"chromatic-gradient($argslist...)":function(n){var l,i,a,s,h,f,m,$,d,b,y,x,w,v,V,z,k,O,q,C,L,E,B,G,K,R,j,J,M,P,T,U,A,N,S,_,D,F,H,I,Q,W,X,Y,Z,ee,re,te;if(f={mode:"lab",bezier:!1,stops:7,type:"linear",padding:null},m=null,S={},h=[],z=[],D=[],a=n.getLength(),b=n.getValue(0),x=p.typeOf(b),"list"===x?(y=p.castToJs(b),y.every(function(e){return"string"===p.typeOf(e)})&&(m=y.join(" "))):"number"===x?m=b.getValue()+b.getUnit():"string"===x&&(m=b.getValue()),O=n.getValue(a-1),q=p.typeOf(O),"map"===q)for(w=k=0,H=O.getLength();H>=0?H>k:k>H;w=H>=0?++k:--k)S[O.getKey(w).getValue()]=O.getValue(w).getValue();for(Z=r(f,S),ee=m?1:0,d="map"===q?a-1:a,w=j=I=ee,Q=d;Q>=I?Q>j:j>Q;w=Q>=I?++j:--j)if(l=n.getValue(w),i=p.typeOf(l),"list"===i){if(Z.bezier)return u.types.Error("Chromatic gradient with bezier interpolation must not have stop initPositions");if(l=o(l),"color"!==p.typeOf(l[0])||"number"!==p.typeOf(l[1])||2!==l.length)return u.types.Error("Chromatic gradient color stops must take the form: <color> [<percentage>]?");if("%"!==l[1].getUnit())return u.types.Error("Chromatic gradient color-stop initPositions must be provided as percentages");h.push(g(l[0])),z.push(l[1].getValue()/100)}else"color"===i&&(h.push(g(l)),z.push(null));for(D=z.slice(0),null===D[0]&&(D[0]=0),null===D[D.length-1]&&(D[D.length-1]=1),C=0,A=0,U=0,R=0,V=N=0,L=D.length;L>N;V=++N)if(te=D[V],null===te){for(v=0,U+=1,W=D.slice(V+1,D.length),P=_=0,E=W.length;E>_;P=++_)if(T=W[P]){A=P+V-C,v=R>=T?R:1*(T-D[C])/(A+1);break}D[V]=v*U}else U=0,C=V,R>te?(te=R,D[V]=te):te>R&&(R=te);for(;h.length<Z.stops;){for(G=0,K=null,w=F=0,X=h.length-1;X>=0?X>F:F>X;w=X>=0?++F:--F)$=D[w+1]-D[w],$>G&&!t(h[w],h[w+1])&&(K=w,G=$);if(null==K)break;M=G/2+D[K],J=e.mix(h[K],h[K+1],.5,Z.mode)._rgb,h.splice(K+1,0,J),D.splice(K+1,0,M),z.splice(K+1,0,null)}for(re=Z.type+"-gradient(",m&&(re+=m+", "),w=Y=0,B=h.length;B>Y;w=++Y)s=h[w],re+=c(s),z[w]&&(re+=" "+100*z[w]+"%"),w<h.length-1&&(re+=", ");return re+=")",u.types.String(re)},"chromatic-scale($argslist...)":function(t){var o,l,i,c,a,h,g,f,m,$,d,b,y,x,w,v,V,z,k;for(a={mode:"lab",stops:10,bezier:!1,location:null,positions:null,padding:null},b={},c=[],h=g=0,x=t.getLength();x>=0?x>g:g>x;h=x>=0?++g:--g)if(o=t.getValue(h),l=p.typeOf(o),"map"===l)for(h=$=0,w=o.getLength();w>=0?w>$:$>w;h=w>=0?++$:--$)b[o.getKey(h).getValue()]=o.getValue(h).getValue();else if("list"===l)for(v=p.castToJs(o),d=0,f=v.length;f>d;d++)i=v[d],"color"===p.typeOf(i)&&c.push(s(i));else"color"===l&&c.push(s(o));if(k=r(a,b),k.bezier?z=e.bezier(c).scale():(z=e.scale(c).mode(k.mode),k.positions&&(z=z.positions(k.positions))),k.location)return n(z(k.location).rgb());for(c=z.colors(k.stops),V=u.types.Map(c.length),h=y=0,m=c.length;m>y;h=++y)i=c[h],V.setKey(h,u.types.Number(h)),V.setValue(h,n(e(i).rgb()));return V}}}).call(this);
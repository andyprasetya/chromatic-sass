(function(){var e,t,r,l,o,n,a,u,c,g,i;t=require("extend"),e=require("chroma-js"),u=require("node-sass"),i=require("node-sass-utils")(u),r=require("lodash.isEqual"),c=function(t){return e(t.getR(),t.getG(),t.getB()).hex()},g=function(e){return[e.getR(),e.getG(),e.getB(),e.getA()]},a=function(e){var t;return t=[Math.round(e[0]),Math.round(e[1]),Math.round(e[2])],e[3]&&t.push(e[3]),t},o=function(e){var t;return e=a(e),t=new u.types.Color,t.setR(e[0]),t.setG(e[1]),t.setB(e[2]),e[3]&&1!==e[3]&&t.setA(e[3]),t},n=function(e){return e=a(e),e[3]&&1!==e[3]?"rgba("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")":"rgb("+e[0]+", "+e[1]+", "+e[2]+")"},l=function(e){var t,r;return t=function(){var t,l,o;for(o=[],r=t=0,l=e.getLength();l>=0?l>t:t>l;r=l>=0?++t:--t)o.push(e.getValue(r));return o}()},module.exports={"chromatic-hsv($x, $y, $z, $alpha: 1)":function(t,r,l,n){return o(e.hsv(t.getValue(),r.getValue(),l.getValue(),n.getValue())._rgb)},"chromatic-lab($x, $y, $z, $alpha: 1)":function(t,r,l,n){return o(e.lab(t.getValue(),r.getValue(),l.getValue(),n.getValue())._rgb)},"chromatic-lch($x, $y, $z, $alpha: 1)":function(t,r,l,n){return o(e.lch(t.getValue(),r.getValue(),l.getValue(),n.getValue())._rgb)},"chromatic-hcl($h, $c, $l, $alpha: 1)":function(t,r,l,n){return o(e.lch(l.getValue(),r.getValue(),t.getValue(),n.getValue())._rgb)},"chromatic-cmyk($c, $m, $y, $k, $alpha: 1)":function(t,r,l,n,a){return o(e.cmyk(t.getValue(),r.getValue(),l.getValue(),n.getValue(),a.getValue())._rgb)},"chromatic-gl($r, $g, $b, $alpha: 1)":function(t,r,l,n){return o(e.gl(t.getValue(),r.getValue(),l.getValue(),n.getValue())._rgb)},"chromatic-temperature($temperature)":function(t){return console.log(t.getValue()),o(e.temperature(t.getValue())._rgb)},"chromatic-color-temperature($color)":function(t){var r;return r=g(t),u.types.Number(e(r).temperature())},"chromatic-color-darken($color, $value: '')":function(t,r){var l;return r=r.getValue(),l=g(t),o(e(l).darken(null!=r?r:void 0)._rgb)},"chromatic-color-lighten($color, $value: '')":function(t,r){var l;return r=r.getValue(),l=g(t),o(e(l).lighten(null!=r?r:void 0)._rgb)},"chromatic-color-saturate($color, $value: '')":function(t,r){var l;return r=r.getValue(),l=g(t),o(e(l).saturate(null!=r?r:void 0)._rgb)},"chromatic-color-desaturate($color, $value: '')":function(t,r){var l;return r=r.getValue(),l=g(t),o(e(l).desaturate(null!=r?r:void 0)._rgb)},"chromatic-color-set($color, $channel, $value)":function(t,r,l){var n;return r=r.getValue(),l=l.getValue(),n=g(t),o(e(n).set(r,l)._rgb)},"chromatic-color-get($color, $channel)":function(t,r){var l;return r=r.getValue(),l=g(t),u.types.Number(e(l).get(r))},"chromatic-color-luminance($color, $luminance: '', $mode: '')":function(t,r,l){var n;return n=g(t),r=r.getValue(),l=l.getValue(),r?o(l?e(n).luminance(r,l)._rgb:e(n).luminance(r)._rgb):u.types.Number(e(n).luminance())},"chromatic-mix($color0, $color1, $position: .5, $mode: 'lab')":function(t,r,l,n){return o(e.mix(g(t),g(r),l.getValue(),n.getValue())._rgb)},"chromatic-blend($color0, $color1, $blendMode)":function(t,r,l){return o(e.blend(g(t),g(r),l.getValue())._rgb)},"chromatic-random()":function(){return o(e.random()._rgb)},"chromatic-contrast($color0, $color1)":function(t,r){return u.types.Number(e.contrast(g(t),g(r)))},"chromatic-gradient($argslist...)":function(o){var a,c,s,h,p,f,m,V,$,b,d,y,v,_,O,x,k,L,q,z,M,N,K,B,C,E,G,J,R,T,j,A,U,w,P,S,D,F,H,I,Q,W,X,Y,Z,ee,te,re;if(f={mode:"lab",stops:7,type:"linear"},m=null,P={},p=[],x=[],D=[],s=o.getLength(),b=o.getValue(0),y=i.typeOf(b),"list"===y?(d=i.castToJs(b),d.every(function(e){return"string"===i.typeOf(e)})&&(m=d.join(" "))):"number"===y?m=b.getValue()+b.getUnit():"string"===y&&(m=b.getValue()),L=o.getValue(s-1),q=i.typeOf(L),"map"===q)for(v=k=0,H=L.getLength();H>=0?H>k:k>H;v=H>=0?++k:--k)P[L.getKey(v).getValue()]=L.getValue(v).getValue();for(Z=t(f,P),ee=m?1:0,$="map"===q?s-1:s,v=G=I=ee,Q=$;Q>=I?Q>G:G>Q;v=Q>=I?++G:--G)if(a=o.getValue(v),c=i.typeOf(a),"list"===c){if(a=l(a),"color"!==i.typeOf(a[0])||"number"!==i.typeOf(a[1])||2!==a.length)return u.types.Error("Chromatic gradient color stops must take the form: <color> [<percentage>]?");if("%"!==a[1].getUnit())return u.types.Error("Chromatic gradient color-stop initPositions must be provided as percentages");p.push(g(a[0])),D.push(a[1].getValue()/100)}else"color"===c&&(p.push(g(a)),D.push(null));for(null===D[0]&&(D[0]=0),null===D[D.length-1]&&(D[D.length-1]=1),z=0,U=0,A=0,E=0,O=w=0,M=D.length;M>w;O=++w)if(re=D[O],null===re){for(_=0,A+=1,W=D.slice(O+1,D.length),T=S=0,N=W.length;N>S;T=++S)if(j=W[T]){U=T+O-z,_=E>=j?E:1*(j-D[z])/(U+1);break}D[O]=_*A,x[O]=_*A}else A=0,z=O,E>re?(re=E,D[O]=re):re>E&&(E=re);for(;p.length<Z.stops;){for(B=0,C=null,v=F=0,X=p.length-1;X>=0?X>F:F>X;v=X>=0?++F:--F)V=D[v+1]-D[v],V>B&&!r(p[v],p[v+1])&&(C=v,B=V);if(null==C)break;R=B/2+D[C],J=e.mix(p[C],p[C+1],.5,Z.mode)._rgb,p.splice(C+1,0,J),D.splice(C+1,0,R)}for(te=Z.type+"-gradient(",m&&(te+=m+", "),v=Y=0,K=p.length;K>Y;v=++Y)h=p[v],te+=n(h),te+=" "+100*D[v]+"%",v<p.length-1&&(te+=", ");return te+=")",u.types.String(te)},"chromatic-scale($argslist...)":function(r){var l,n,a,g,s,h,p,f,m,V,$,b,d,y,v,_,O,x,k;for(s={mode:"lab",stops:10,location:null,positions:null,padding:null},b={},g=[],h=p=0,y=r.getLength();y>=0?y>p:p>y;h=y>=0?++p:--p)if(l=r.getValue(h),n=i.typeOf(l),"map"===n)for(h=V=0,v=l.getLength();v>=0?v>V:V>v;h=v>=0?++V:--V)b[l.getKey(h).getValue()]=l.getValue(h).getValue();else if("list"===n)for(_=i.castToJs(l),$=0,f=_.length;f>$;$++)a=_[$],"color"===i.typeOf(a)&&g.push(c(a));else"color"===n&&g.push(c(l));if(k=t(s,b),x=e.scale(g).mode(k.mode),k.positions&&(x=x.positions(k.positions)),k.padding&&(x=x.padding(k.padding)),k.location)return o(x(k.location).rgb());for(g=x.colors(k.stops),O=u.types.Map(g.length),h=d=0,m=g.length;m>d;h=++d)a=g[h],O.setKey(h,u.types.Number(h)),O.setValue(h,o(e(a).rgb()));return O},"chromatic-bezier($argslist...)":function(r){var l,o,n,a,u,g,s,h,p,f,m,V,$,b,d,y;for(u={stops:10,location:null},m={},a=[],g=s=0,V=r.getLength();V>=0?V>s:s>V;g=V>=0?++s:--s)if(l=r.getValue(g),o=i.typeOf(l),"map"===o)for(g=p=0,$=l.getLength();$>=0?$>p:p>$;g=$>=0?++p:--p)m[l.getKey(g).getValue()]=l.getValue(g).getValue();else if("list"===o)for(b=i.castToJs(l),f=0,h=b.length;h>f;f++)n=b[f],"color"===i.typeOf(n)&&a.push(c(n));else"color"===o&&a.push(c(l));return y=t(u,m),d=e.bezier(a).scale()}}}).call(this);
(function(){var e,t,r,l,o,n,a,u,c,g,i;t=require("extend"),e=require("chroma-js"),u=require("node-sass"),i=require("node-sass-utils")(u),r=require("lodash.isEqual"),c=function(t){return e(t.getR(),t.getG(),t.getB()).hex()},g=function(e){return[e.getR(),e.getG(),e.getB(),e.getA()]},a=function(e){var t;return t=[Math.round(e[0]),Math.round(e[1]),Math.round(e[2])],e[3]&&t.push(e[3]),t},o=function(e){var t;return e=a(e),t=new u.types.Color,t.setR(e[0]),t.setG(e[1]),t.setB(e[2]),e[3]&&t.setA(e[3]),t},n=function(e){return e=a(e),e[3]?"rgba("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")":"rgb("+e[0]+", "+e[1]+", "+e[2]+")"},l=function(e){var t,r;return t=function(){var t,l,o;for(o=[],r=t=0,l=e.getLength();l>=0?l>t:t>l;r=l>=0?++t:--t)o.push(e.getValue(r));return o}()},module.exports={"chromatic-hsv($x, $y, $z, $alpha: 1)":function(t,r,l,n){return o(e.hsv(t.getValue(),r.getValue(),l.getValue(),n.getValue())._rgb)},"chromatic-lab($x, $y, $z, $alpha: 1)":function(t,r,l,n){return o(e.lab(t.getValue(),r.getValue(),l.getValue(),n.getValue())._rgb)},"chromatic-lch($x, $y, $z, $alpha: 1)":function(t,r,l,n){return o(e.lch(t.getValue(),r.getValue(),l.getValue(),n.getValue())._rgb)},"chromatic-hcl($x, $y, $z, $alpha: 1)":function(t,r,l,n){return o(e.hcl(t.getValue(),r.getValue(),l.getValue(),n.getValue())._rgb)},"chromatic-cmyk($c, $m, $y, $k, $alpha: 1)":function(t,r,l,n,a){return o(e.cmyk(t.getValue(),r.getValue(),l.getValue(),n.getValue(),a.getValue())._rgb)},"chromatic-gl($r, $g, $b, $alpha: 1)":function(t,r,l,n){return o(e.gl(t.getValue(),r.getValue(),l.getValue(),n.getValue())._rgb)},"chromatic-temperature($temp)":function(t){var r;return r=g(t),o(e.temperature(r)._rgb)},"chromatic-color-temperature($color)":function(t){var r;return r=g(t),u.types.Number(e(r).temperature())},"chromatic-color-darken($color, $value: '')":function(t,r){var l;return r=r.getValue(),l=g(t),o(e(l).darken(null!=r?r:void 0)._rgb)},"chromatic-color-lighten($color, $value: '')":function(t,r){var l;return r=r.getValue(),l=g(t),o(e(l).lighten(null!=r?r:void 0)._rgb)},"chromatic-color-saturate($color, $value: '')":function(t,r){var l;return r=r.getValue(),l=g(t),o(e(l).saturate(null!=r?r:void 0)._rgb)},"chromatic-color-desaturate($color, $value: '')":function(t,r){var l;return r=r.getValue(),l=g(t),o(e(l).desaturate(null!=r?r:void 0)._rgb)},"chromatic-color-set($color, $channel, $value)":function(t,r,l){var n;return r=r.getValue(),l=l.getValue(),n=g(t),o(e(n).set(r,l)._rgb)},"chromatic-color-get($color, $channel)":function(t,r){var l;return r=r.getValue(),l=g(t),u.types.Number(e(l).get(r))},"chromatic-color-luminance($color, $luminance: '', $mode: '')":function(t,r,l){var n;return n=g(t),r=r.getValue(),l=l.getValue(),r?o(l?e(n).luminance(r,l)._rgb:e(n).luminance(r)._rgb):u.types.Number(e(n).luminance())},"chromatic-mix($color0, $color1, $position: .5, $mode: 'lab')":function(t,r,l,n){return o(e.mix(g(t),g(r),l.getValue(),n.getValue())._rgb)},"chromatic-blend($color0, $color1, $blendMode)":function(t,r,l){return o(e.blend(g(t),g(r),l.getValue())._rgb)},"chromatic-random()":function(){return o(e.random()._rgb)},"chromatic-contrast($color0, $color1)":function(t,r){return u.types.Number(e.contrast(g(t),g(r)))},"chromatic-gradient($argslist...)":function(o){var a,c,s,h,p,f,m,V,$,b,d,y,v,_,x,O,k,L,q,z,M,N,K,B,C,E,G,J,R,T,j,A,U,w,P,S,D,F,H,I,Q,W,X,Y,Z,ee,te,re;if(f={mode:"lab",stops:7,type:"linear"},m=null,S={},p=[],O=[],F=[],s=o.getLength(),b=o.getValue(0),y=i.typeOf(b),"list"===y?(d=i.castToJs(b),d.every(function(e){return"string"===i.typeOf(e)})&&(m=d.join(" "))):"number"===y?m=b.getValue()+b.getUnit():"string"===y&&(m=b.getValue()),q=o.getValue(s-1),z=i.typeOf(q),"map"===z)for(v=k=0,I=q.getLength();I>=0?I>k:k>I;v=I>=0?++k:--k)S[q.getKey(v).getValue()]=q.getValue(v).getValue();for(Z=t(f,S),ee=m?1:0,$="map"===z?s-1:s,v=L=Q=ee,W=$;W>=Q?W>L:L>W;v=W>=Q?++L:--L)if(a=o.getValue(v),c=i.typeOf(a),"list"===c){if(a=l(a),"color"!==i.typeOf(a[0])||"number"!==i.typeOf(a[1])||2!==a.length)return u.types.Error("Chromatic gradient color stops must take the form: <color> [<percentage>]?");if("%"!==a[1].getUnit())return u.types.Error("Chromatic gradient color-stop initPositions must be provided as percentages");p.push(g(a[0])),F.push(a[1].getValue()/100)}else"color"===c&&(p.push(g(a)),F.push(null));for(null===F[0]&&(F[0]=0),null===F[F.length-1]&&(F[F.length-1]=1),M=0,w=0,U=0,G=0,x=J=0,N=F.length;N>J;x=++J)if(re=F[x],null===re){for(_=0,U+=1,X=F.slice(x+1,F.length),j=P=0,K=X.length;K>P;j=++P)if(A=X[j]){w=j+x-M,_=G>=A?G:1*(A-F[M])/(w+1);break}F[x]=_*U,O[x]=_*U}else U=0,M=x,G>re?(re=G,F[x]=re):re>G&&(G=re);for(;p.length<Z.stops;){for(C=0,E=null,v=D=0,Y=p.length-1;Y>=0?Y>D:D>Y;v=Y>=0?++D:--D)V=F[v+1]-F[v],V>C&&!r(p[v],p[v+1])&&(E=v,C=V);if(null==E)break;T=C/2+F[E],R=e.mix(p[E],p[E+1],.5,Z.mode)._rgb,p.splice(E+1,0,R),F.splice(E+1,0,T)}for(te=Z.type+"-gradient(",m&&(te+=m+", "),v=H=0,B=p.length;B>H;v=++H)h=p[v],te+=n(h),te+=" "+100*F[v]+"%",v<p.length-1&&(te+=", ");return te+=")",u.types.String(te)},"chromatic-scale($argslist...)":function(r){var l,n,a,g,s,h,p,f,m,V,$,b,d,y,v,_,x,O,k;for(s={mode:"lab",stops:10,location:null,positions:null,padding:null},d={},g=[],h=p=0,y=r.getLength();y>=0?y>p:p>y;h=y>=0?++p:--p)if(l=r.getValue(h),n=i.typeOf(l),"map"===n)for(h=f=0,v=l.getLength();v>=0?v>f:f>v;h=v>=0?++f:--f)d[l.getKey(h).getValue()]=l.getValue(h).getValue();else if("list"===n)for(_=i.castToJs(l),$=0,m=_.length;m>$;$++)a=_[$],"color"===i.typeOf(a)&&g.push(c(a));else"color"===n&&g.push(c(l));if(k=t(s,d),O=e.scale(g).mode(k.mode),k.positions&&(O=O.positions(k.positions)),k.padding&&(O=O.padding(k.padding)),k.location)return o(O(k.location).rgb());for(g=O.colors(k.stops),x=u.types.Map(g.length),h=b=0,V=g.length;V>b;h=++b)a=g[h],x.setKey(h,u.types.Number(h)),x.setValue(h,o(e(a).rgb()));return x},"chromatic-bezier($argslist...)":function(r){var l,o,n,a,u,g,s,h,p,f,m,V,$,b,d,y;for(u={stops:10,location:null},m={},a=[],g=s=0,V=r.getLength();V>=0?V>s:s>V;g=V>=0?++s:--s)if(l=r.getValue(g),o=i.typeOf(l),"map"===o)for(g=h=0,$=l.getLength();$>=0?$>h:h>$;g=$>=0?++h:--h)m[l.getKey(g).getValue()]=l.getValue(g).getValue();else if("list"===o)for(b=i.castToJs(l),f=0,p=b.length;p>f;f++)n=b[f],"color"===i.typeOf(n)&&a.push(c(n));else"color"===o&&a.push(c(l));return y=t(u,m),d=e.bezier(a).scale()}}}).call(this);
(function(){var e,t,r,o,n,c,u,i,s,g,h,p,f;t=require("extend"),e=require("chroma-js"),i=require("node-sass"),p=require("node-sass-utils")(i),f=require("sassport"),r=require("lodash.isEqual"),n=function(e){return i.types.Color(e[0],e[1],e[2])},g=function(t){return e(t.getR(),t.getG(),t.getB()).rgb()},s=function(t){return e(t.getR(),t.getG(),t.getB()).hex()},h=function(e){return[e.getR(),e.getG(),e.getB(),e.getA()]},u=function(e){return"rgba("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},c=function(e){return i.types.Color(rgb[0],rgb[1],rgb[2],rgb[3])},o=function(e){var t,r;return t=function(){var t,o,n;for(n=[],r=t=0,o=e.getLength();o>=0?o>t:t>o;r=o>=0?++t:--t)n.push(e.getValue(r));return n}()},module.exports={"chromatic($argslist...)":f.wrap(function(t){return e.lab(l,a,b).hex()}),"chromatic-hsv($x, $y, $z)":f.wrap(function(t,r,o){return e.hsv(t,r,o).hex()}),"chromatic-lab($x, $y, $z)":f.wrap(function(t,r,o){return e.lab(t,r,o).hex()}),"chromatic-lch($x, $y, $z)":f.wrap(function(t,r,o){return e.lch(t,r,o).hex()}),"chromatic-hcl($x, $y, $z)":f.wrap(function(t,r,o){return e.hcl(t,r,o).hex()}),"chromatic-cmyk($c, $m, $y, $k)":f.wrap(function(t,r,o,n){return e.cmyk(t,r,o,n).hex()}),"chromatic-gl($r, $g, $b, $a: 1)":f.wrap(function(t,r,o,n){return e.gl(t,r,o,n).hex()}),"chromatic-color-temperature($color)":f.wrap(function(t){return e(s(t)).temperature()}),"chromatic-color-darken($color, $value: '')":f.wrap(function(t,r){return e(s(t)).darken(null!=r?r:void 0).hex()}),"chromatic-color-lighten($color, $value: '')":f.wrap(function(t,r){return e(s(t)).lighten(null!=r?r:void 0).hex()}),"chromatic-color-saturate($color, $value: '')":f.wrap(function(t,r){return e(s(t)).saturate(null!=r?r:void 0).hex()}),"chromatic-color-desaturate($color, $value: '')":f.wrap(function(t,r){return e(s(t)).desaturate(null!=r?r:void 0).hex()}),"chromatic-color-set($color, $channel, $value)":f.wrap(function(t,r,o){return e(s(t)).set(r,o).hex()}),"chromatic-color-get($color, $channel)":f.wrap(function(t,r){return e(s(t)).get(r)}),"chromatic-color-luminance($color, $luminance: '', $mode: '')":f.wrap(function(t,r,o){return r?o?e(s(t)).luminance(r,o).hex():e(s(t)).luminance(r).hex():e(s(t)).luminance()}),"chromatic-mix($color0, $color1, $position: .5, $mode: 'lab')":f.wrap(function(t,r,o,n){return e.mix(s(t),s(r),o,n).hex()}),"chromatic-blend($color0, $color1, $blendMode)":f.wrap(function(t,r,o){return e.blend(s(t),s(r),o).hex()}),"chromatic-random()":f.wrap(function(){return e.random().hex()}),"chromatic-contrast($color0, $color1)":f.wrap(function(t,r){return e.contrast(s(t),s(r))}),"chromatic-gradient($argslist...)":function(n){var l,a,c,s,g,f,m,$,d,y,b,x,v,w,V,O,k,q,L,z,C,K,B,E,G,J,R,T,j,M,U,A,N,P,S,_,D,F,H,I,Q,W,X,Y,Z,ee,te,re;if(f={mode:"lab",stops:7,type:"linear"},m=null,S={},g=[],O=[],D=[],c=n.getLength(),y=n.getValue(0),x=p.typeOf(y),"list"===x?(b=p.castToJs(y),b.every(function(e){return"string"===p.typeOf(e)})&&(m=b.join(" "))):"number"===x?m=y.getValue()+y.getUnit():"string"===x&&(m=y.getValue()),q=n.getValue(c-1),L=p.typeOf(q),"map"===L)for(v=k=0,H=q.getLength();H>=0?H>k:k>H;v=H>=0?++k:--k)S[q.getKey(v).getValue()]=q.getValue(v).getValue();for(Z=t(f,S),ee=m?1:0,d="map"===L?c-1:c,v=R=I=ee,Q=d;Q>=I?Q>R:R>Q;v=Q>=I?++R:--R)if(l=n.getValue(v),a=p.typeOf(l),"list"===a){if(l=o(l),"color"!==p.typeOf(l[0])||"number"!==p.typeOf(l[1])||2!==l.length)return i.types.Error("Chromatic gradient color stops must take the form: <color> [<percentage>]?");if("%"!==l[1].getUnit())return i.types.Error("Chromatic gradient color-stop initPositions must be provided as percentages");g.push(h(l[0])),D.push(l[1].getValue()/100)}else"color"===a&&(g.push(h(l)),D.push(null));for(null===D[0]&&(D[0]=0),null===D[D.length-1]&&(D[D.length-1]=1),z=0,N=0,A=0,J=0,V=P=0,C=D.length;C>P;V=++P)if(re=D[V],null===re){for(w=0,A+=1,W=D.slice(V+1,D.length),M=_=0,K=W.length;K>_;M=++_)if(U=W[M]){N=M+V-z,w=J>=U?J:1*(U-D[z])/(N+1);break}D[V]=w*A,O[V]=w*A}else A=0,z=V,J>re?(re=J,D[V]=re):re>J&&(J=re);for(;g.length<Z.stops;){for(E=0,G=null,v=F=0,X=g.length-1;X>=0?X>F:F>X;v=X>=0?++F:--F)$=D[v+1]-D[v],$>E&&!r(g[v],g[v+1])&&(G=v,E=$);if(null==G)break;j=E/2+D[G],T=e.mix(g[G],g[G+1],.5,Z.mode)._rgb,g.splice(G+1,0,T),D.splice(G+1,0,j)}for(te=Z.type+"-gradient(",m&&(te+=m+", "),v=Y=0,B=g.length;B>Y;v=++Y)s=g[v],te+=u(s),te+=" "+100*D[v]+"%",v<g.length-1&&(te+=", ");return te+=")",i.types.String(te)},"chromatic-scale($argslist...)":function(r){var o,l,a,c,u,g,h,f,m,$,d,y,b,x,v,w,V,O,k;for(u={mode:"lab",stops:10,location:null,positions:null,padding:null},y={},c=[],g=h=0,x=r.getLength();x>=0?x>h:h>x;g=x>=0?++h:--h)if(o=r.getValue(g),l=p.typeOf(o),"map"===l)for(g=$=0,v=o.getLength();v>=0?v>$:$>v;g=v>=0?++$:--$)y[o.getKey(g).getValue()]=o.getValue(g).getValue();else if("list"===l)for(w=p.castToJs(o),d=0,f=w.length;f>d;d++)a=w[d],"color"===p.typeOf(a)&&c.push(s(a));else"color"===l&&c.push(s(o));if(k=t(u,y),O=e.scale(c).mode(k.mode),k.positions&&(O=O.positions(k.positions)),k.padding&&(O=O.padding(k.padding)),k.location)return n(O(k.location).rgb());for(c=O.colors(k.stops),V=i.types.Map(c.length),g=b=0,m=c.length;m>b;g=++b)a=c[g],V.setKey(g,i.types.Number(g)),V.setValue(g,n(e(a).rgb()));return V},"chromatic-bezier($argslist...)":function(r){var o,n,l,a,c,u,i,g,h,f,m,$,d,y,b,x;for(c={stops:10,location:null},m={},a=[],u=i=0,$=r.getLength();$>=0?$>i:i>$;u=$>=0?++i:--i)if(o=r.getValue(u),n=p.typeOf(o),"map"===n)for(u=h=0,d=o.getLength();d>=0?d>h:h>d;u=d>=0?++h:--h)m[o.getKey(u).getValue()]=o.getValue(u).getValue();else if("list"===n)for(y=p.castToJs(o),f=0,g=y.length;g>f;f++)l=y[f],"color"===p.typeOf(l)&&a.push(s(l));else"color"===n&&a.push(s(o));return x=t(c,m),b=e.bezier(a).scale()}}}).call(this);
(function(){var e,r,t,o,n,c,i,u,s;r=require("extend"),e=require("chroma-js"),n=require("node-sass"),u=require("node-sass-utils")(n),s=require("sassport"),o=function(e){return n.types.Color(e[0],e[1],e[2])},i=function(r){return e(r.getR(),r.getG(),r.getB()).rgb()},c=function(r){return e(r.getR(),r.getG(),r.getB()).hex()},t=function(e){var r,t;return r=function(){var r,o,n;for(n=[],t=r=0,o=e.getLength();o>=0?o>r:r>o;t=o>=0?++r:--r)n.push(e.getValue(t));return n}()},module.exports={"chromatic($argslist...)":s.wrap(function(r){return e.lab(l,a,b).hex()}),"chromatic-hsv($x, $y, $z)":s.wrap(function(r,t,o){return e.hsv(r,t,o).hex()}),"chromatic-lab($x, $y, $z)":s.wrap(function(r,t,o){return e.lab(r,t,o).hex()}),"chromatic-lch($x, $y, $z)":s.wrap(function(r,t,o){return e.lch(r,t,o).hex()}),"chromatic-hcl($x, $y, $z)":s.wrap(function(r,t,o){return e.hcl(r,t,o).hex()}),"chromatic-cmyk($c, $m, $y, $k)":s.wrap(function(r,t,o,n){return e.cmyk(r,t,o,n).hex()}),"chromatic-gl($r, $g, $b, $a: 1)":s.wrap(function(r,t,o,n){return e.gl(r,t,o,n).hex()}),"chromatic-color-temperature($color)":s.wrap(function(r){return e(c(r)).temperature()}),"chromatic-color-darken($color, $value: '')":s.wrap(function(r,t){return e(c(r)).darken(null!=t?t:void 0).hex()}),"chromatic-color-lighten($color, $value: '')":s.wrap(function(r,t){return e(c(r)).lighten(null!=t?t:void 0).hex()}),"chromatic-color-saturate($color, $value: '')":s.wrap(function(r,t){return e(c(r)).saturate(null!=t?t:void 0).hex()}),"chromatic-color-desaturate($color, $value: '')":s.wrap(function(r,t){return e(c(r)).desaturate(null!=t?t:void 0).hex()}),"chromatic-color-set($color, $channel, $value)":s.wrap(function(r,t,o){return e(c(r)).set(t,o).hex()}),"chromatic-color-get($color, $channel)":s.wrap(function(r,t){return e(c(r)).get(t)}),"chromatic-color-luminance($color, $luminance: '', $mode: '')":s.wrap(function(r,t,o){return t?o?e(c(r)).luminance(t,o).hex():e(c(r)).luminance(t).hex():e(c(r)).luminance()}),"chromatic-mix($color0, $color1, $position: .5, $mode: 'lab')":s.wrap(function(r,t,o,n){return e.mix(c(r),c(t),o,n).hex()}),"chromatic-blend($color0, $color1, $blendMode)":s.wrap(function(r,t,o){return e.blend(c(r),c(t),o).hex()}),"chromatic-random()":s.wrap(function(){return e.random().hex()}),"chromatic-contrast($color0, $color1)":s.wrap(function(r,t){return e.contrast(c(r),c(t))}),"chromatic-gradient($argslist...)":function(o){var l,a,i,s,h,g,p,m,f,$,d,y,x,b,v,w,V,z,k,O,q,L,C,E,K,j,B,G,J,M,R,T,U,N,S,A,D,F,H,I,P,Q,W,X,Y,Z,_,ee;if(g={mode:"lab",bezier:!1,stops:7,type:"linear",padding:null},p=null,N={},h=[],A=[],f=[],i=o.getLength(),d=o.getValue(0),x=u.typeOf(d),"list"===x?(y=u.castToJs(d),y.every(function(e){return"string"===u.typeOf(e)})&&(p=y.join(" "))):"number"===x?p=d.getValue()+d.getUnit():"string"===x&&(p=d.getValue()),z=o.getValue(i-1),k=u.typeOf(z),"map"===k)for(b=V=0,F=z.getLength();F>=0?F>V:V>F;b=F>=0?++V:--V)N[z.getKey(b).getValue()]=z.getValue(b).getValue();for(Y=r(g,N),Z=p?1:0,$="map"===k?i-1:i,b=B=H=Z,I=$;I>=H?I>B:B>I;b=I>=H?++B:--B)if(l=o.getValue(b),a=u.typeOf(l),"list"===a){if(Y.bezier)return n.types.Error("Chromatic gradient with bezier interpolation must not have stop positions");if(l=t(l),"color"!==u.typeOf(l[0])||"number"!==u.typeOf(l[1])||2!==l.length)return n.types.Error("Chromatic gradient color stops must take the form: <color> [<percentage>]?");if("%"!==l[1].getUnit())return n.types.Error("Chromatic gradient color-stop positions must be provided as percentages");h.push(c(l[0])),A.push(l[1].getValue()/100)}else"color"===a&&(h.push(c(l)),A.push(null));if(A.every(function(e){return null===e}))h=e.scale(h).mode(Y.mode).colors(Y.stops);else{for(f=A.slice(0),null===f[0]&&(f[0]=0),null===f[f.length-1]?f[f.length-1]=1:f[f.length-1]<1&&(h.push(h[h.length-1]),f.push(1),A.push(null)),O=0,T=0,R=0,j=0,w=U=0,q=f.length;q>U;w=++U)if(ee=f[w],null===ee){for(v=0,R+=1,P=f.slice(w+1,f.length),J=S=0,L=P.length;L>S;J=++S)if(M=P[J]){T=J+w-O,v=j>=M?j:1*(M-f[O])/(T+1);break}f[w]=v*R}else R=0,O=w,j>ee?(ee=j,f[w]=ee):ee>j&&(j=ee);for(X=e.scale(h).domain(f).mode(Y.mode);h.length<Y.stops;){for(E=0,K=null,b=D=0,Q=h.length-1;Q>=0?Q>D:D>Q;b=Q>=0?++D:--D)m=f[b+1]-f[b],m>E&&h[b]!==h[b+1]&&(K=b,E=m);if(null==K)break;G=E/2+f[K],h.splice(K+1,0,X(G).hex()),f.splice(K+1,0,G),A.splice(K+1,0,null)}}for(_=Y.type+"-gradient(",p&&(_+=p+", "),b=W=0,C=h.length;C>W;b=++W)s=h[b],_+=s,A[b]&&(_+=" "+100*A[b]+"%"),b<h.length-1&&(_+=", ");return _+=")",n.types.String(_)},"chromatic-scale($argslist...)":function(t){var l,a,i,s,h,g,p,m,f,$,d,y,x,b,v,w,V,z,k;for(h={mode:"lab",stops:10,bezier:!1,location:null,domain:null,padding:null},y={},s=[],g=p=0,b=t.getLength();b>=0?b>p:p>b;g=b>=0?++p:--p)if(l=t.getValue(g),a=u.typeOf(l),"map"===a)for(g=$=0,v=l.getLength();v>=0?v>$:$>v;g=v>=0?++$:--$)y[l.getKey(g).getValue()]=l.getValue(g).getValue();else if("list"===a)for(w=u.castToJs(l),d=0,m=w.length;m>d;d++)i=w[d],"color"===u.typeOf(i)&&s.push(c(i));else"color"===a&&s.push(c(l));if(k=r(h,y),k.bezier?z=e.bezier(s).scale():(z=e.scale(s).mode(k.mode),k.domain&&(z=z.domain(k.domain))),k.location)return o(z(k.location).rgb());for(s=z.colors(k.stops),V=n.types.Map(s.length),g=x=0,f=s.length;f>x;g=++x)i=s[g],V.setKey(g,n.types.Number(g)),V.setValue(g,o(e(i).rgb()));return V}}}).call(this);
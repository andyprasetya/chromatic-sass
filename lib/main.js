(function(){var e,r,t,n,o,c,u,i,s;r=require("extend"),e=require("chroma-js"),o=require("node-sass"),i=require("node-sass-utils")(o),s=require("sassport"),n=function(e){return o.types.Color(e[0],e[1],e[2])},u=function(r){return e(r.getR(),r.getG(),r.getB()).rgb()},c=function(r){return e(r.getR(),r.getG(),r.getB()).hex()},t=function(e){var r,t;return r=function(){var r,n,o;for(o=[],t=r=0,n=e.getLength();n>=0?n>r:r>n;t=n>=0?++r:--r)o.push(e.getValue(t));return o}()},module.exports={"chromatic($argslist...)":s.wrap(function(r){return e.lab(l,a,b).hex()}),"chromatic-hsv($x, $y, $z)":s.wrap(function(r,t,n){return e.hsv(r,t,n).hex()}),"chromatic-lab($x, $y, $z)":s.wrap(function(r,t,n){return e.lab(r,t,n).hex()}),"chromatic-lch($x, $y, $z)":s.wrap(function(r,t,n){return e.lch(r,t,n).hex()}),"chromatic-hcl($x, $y, $z)":s.wrap(function(r,t,n){return e.hcl(r,t,n).hex()}),"chromatic-cmyk($c, $m, $y, $k)":s.wrap(function(r,t,n,o){return e.cmyk(r,t,n,o).hex()}),"chromatic-gl($r, $g, $b, $a: 1)":s.wrap(function(r,t,n,o){return e.gl(r,t,n,o).hex()}),"chromatic-color-temperature($color)":s.wrap(function(r){return e(c(r)).temperature()}),"chromatic-color-darken($color, $value: '')":s.wrap(function(r,t){return e(c(r)).darken(null!=t?t:void 0).hex()}),"chromatic-color-lighten($color, $value: '')":s.wrap(function(r,t){return e(c(r)).lighten(null!=t?t:void 0).hex()}),"chromatic-color-saturate($color, $value: '')":s.wrap(function(r,t){return e(c(r)).saturate(null!=t?t:void 0).hex()}),"chromatic-color-desaturate($color, $value: '')":s.wrap(function(r,t){return e(c(r)).desaturate(null!=t?t:void 0).hex()}),"chromatic-color-set($color, $channel, $value)":s.wrap(function(r,t,n){return e(c(r)).set(t,n).hex()}),"chromatic-color-get($color, $channel)":s.wrap(function(r,t){return e(c(r)).get(t)}),"chromatic-color-luminance($color, $luminance: '', $mode: '')":s.wrap(function(r,t,n){return t?n?e(c(r)).luminance(t,n).hex():e(c(r)).luminance(t).hex():e(c(r)).luminance()}),"chromatic-mix($color0, $color1, $position: .5, $mode: 'lab')":s.wrap(function(r,t,n,o){return e.mix(c(r),c(t),n,o).hex()}),"chromatic-blend($color0, $color1, $blendMode)":s.wrap(function(r,t,n){return e.blend(c(r),c(t),n).hex()}),"chromatic-random()":s.wrap(function(){return e.random().hex()}),"chromatic-contrast($color0, $color1)":s.wrap(function(r,t){return e.contrast(c(r),c(t))}),"chromatic-gradient($argslist...)":function(n){var l,a,u,s,h,g,p,m,f,$,d,y,x,b,v,w,V,k,z,O,q,L,C,K,j,B,E,G,J,M,R,T,U,N,S,A,D,F,H,I,P,Q,W,X,Y,Z,_,ee;if(g={mode:"lab",bezier:!1,stops:7,type:"linear",padding:null},p=null,N={},h=[],A=[],f=[],u=n.getLength(),d=n.getValue(0),x=i.typeOf(d),"list"===x?(y=i.castToJs(d),y.every(function(e){return"string"===i.typeOf(e)})&&(p=y.join(" "))):"number"===x?p=d.getValue()+d.getUnit():"string"===x&&(p=d.getValue()),k=n.getValue(u-1),z=i.typeOf(k),"map"===z)for(b=V=0,F=k.getLength();F>=0?F>V:V>F;b=F>=0?++V:--V)N[k.getKey(b).getValue()]=k.getValue(b).getValue();for(Y=r(g,N),Z=p?1:0,$="map"===z?u-1:u,b=E=H=Z,I=$;I>=H?I>E:E>I;b=I>=H?++E:--E)if(l=n.getValue(b),a=i.typeOf(l),"list"===a){if(l=t(l),"color"!==i.typeOf(l[0])||"number"!==i.typeOf(l[1])||2!==l.length)return o.types.Error("Chromatic gradient color stops must take the form: <color> [<percentage>]?");if("%"!==l[1].getUnit())return o.types.Error("Chromatic gradient color-stop positions must be provided as percentages");h.push(c(l[0])),A.push(l[1].getValue()/100)}else"color"===a&&(h.push(c(l)),A.push(null));if(A.every(function(e){return null===e}))h=e.scale(h).mode(Y.mode).colors(Y.stops);else{for(f=A.slice(0),null===f[0]&&(f[0]=0),null===f[f.length-1]?f[f.length-1]=1:f[f.length-1]<1&&(h.push(h[h.length-1]),f.push(1),A.push(null)),O=0,T=0,R=0,B=0,w=U=0,q=f.length;q>U;w=++U)if(ee=f[w],null===ee){for(v=0,R+=1,P=f.slice(w+1,f.length),J=S=0,L=P.length;L>S;J=++S)if(M=P[J]){T=J+w-O,v=B>=M?B:1*(M-f[O])/(T+1);break}f[w]=v*R}else R=0,O=w,B>ee?(ee=B,f[w]=ee):ee>B&&(B=ee);for(X=e.scale(h).domain(f).mode(Y.mode);h.length<Y.stops;){for(K=0,j=null,b=D=0,Q=h.length-1;Q>=0?Q>D:D>Q;b=Q>=0?++D:--D)m=f[b+1]-f[b],m>K&&h[b]!==h[b+1]&&(j=b,K=m);if(null==j)break;G=K/2+f[j],h.splice(j+1,0,X(G).hex()),f.splice(j+1,0,G),A.splice(j+1,0,null)}}for(_=Y.type+"-gradient(",p&&(_+=p+", "),b=W=0,C=h.length;C>W;b=++W)s=h[b],_+=s,null!=A[b]&&(_+=" "+100*A[b]+"%"),b<h.length-1&&(_+=", ");return _+=")",o.types.String(_)},"chromatic-scale($argslist...)":function(t){var l,a,u,s,h,g,p,m,f,$,d,y,x,b,v,w,V,k,z;for(h={mode:"lab",stops:10,bezier:!1,location:null,domain:null,padding:null},y={},s=[],g=p=0,b=t.getLength();b>=0?b>p:p>b;g=b>=0?++p:--p)if(l=t.getValue(g),a=i.typeOf(l),"map"===a)for(g=$=0,v=l.getLength();v>=0?v>$:$>v;g=v>=0?++$:--$)y[l.getKey(g).getValue()]=l.getValue(g).getValue();else if("list"===a)for(w=i.castToJs(l),d=0,m=w.length;m>d;d++)u=w[d],"color"===i.typeOf(u)&&s.push(c(u));else"color"===a&&s.push(c(l));if(z=r(h,y),z.bezier?k=e.bezier(s).scale():(k=e.scale(s).mode(z.mode),z.domain&&(k=k.domain(z.domain))),z.location)return n(k(z.location).rgb());for(s=k.colors(z.stops),V=o.types.Map(s.length),g=x=0,f=s.length;f>x;g=++x)u=s[g],V.setKey(g,o.types.Number(g)),V.setValue(g,n(e(u).rgb()));return V}}}).call(this);